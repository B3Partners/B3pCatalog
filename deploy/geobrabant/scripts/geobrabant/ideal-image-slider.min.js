var IdealImageSlider=function(){var l=function(a){a=a||{};for(var b=1;b<arguments.length;b++){var d=arguments[b];if(d)for(var f in d)d.hasOwnProperty(f)&&("object"===typeof d[f]?deepExtend(a[f],d[f]):a[f]=d[f])}return a},h=function(a,b){return!b?!1:a.classList?a.classList.contains(b):RegExp("(^| )"+b+"( |$)","gi").test(a.className)},d=function(a,b){b&&(a.classList?a.classList.add(b):a.className+=" "+b)},e=function(a,b){b&&(a.classList?a.classList.remove(b):a.className=a.className.replace(RegExp("(^|\\b)"+
b.split(" ").join("|")+"(\\b|$)","gi")," "))},c=function(a,b){if(!a.style.backgroundImage){var d=new Image;d.setAttribute("src",a.getAttribute("data-src"));d.onload=function(){a.style.backgroundImage="url("+a.getAttribute("data-src")+")";"function"===typeof b&&b(this)}}},g=function(a,b,d){a.style.webkitTransitionDuration=a.style.MozTransitionDuration=a.style.msTransitionDuration=a.style.OTransitionDuration=a.style.transitionDuration=d+"ms";a.style.webkitTransform=a.style.MozTransform=a.style.msTransform=
a.style.OTransform="translateX("+b+"px)"},m=function(a){a.style.removeProperty("-webkit-transition-duration");a.style.removeProperty("-moz-transition-duration");a.style.removeProperty("-ms-transition-duration");a.style.removeProperty("-o-transition-duration");a.style.removeProperty("transition-duration");a.style.removeProperty("-webkit-transform");a.style.removeProperty("-moz-transform");a.style.removeProperty("-ms-transform");a.style.removeProperty("-o-transform");a.style.removeProperty("transform")},
f={vars:{start:{},delta:{},isScrolling:void 0,direction:null},start:function(a){h(this._attributes.container,this.settings.classes.animating)||(a=a.touches[0],f.vars.start={x:a.pageX,y:a.pageY,time:+new Date},f.vars.delta={},f.vars.isScrolling=void 0,f.vars.direction=null,this.stop(),this.settings.beforeChange.apply(this),d(this._attributes.container,this.settings.classes.touching))},move:function(a){if(!h(this._attributes.container,this.settings.classes.animating)&&!(1<a.touches.length||a.scale&&
1!==a.scale)){var b=a.touches[0];f.vars.delta={x:b.pageX-f.vars.start.x,y:b.pageY-f.vars.start.y};"undefined"==typeof f.vars.isScrolling&&(f.vars.isScrolling=!!(f.vars.isScrolling||Math.abs(f.vars.delta.x)<Math.abs(f.vars.delta.y)));f.vars.isScrolling||(a.preventDefault(),g(this._attributes.previousSlide,f.vars.delta.x-this._attributes.previousSlide.offsetWidth,0),g(this._attributes.currentSlide,f.vars.delta.x,0),g(this._attributes.nextSlide,f.vars.delta.x+this._attributes.currentSlide.offsetWidth,
0))}},end:function(a){if(!h(this._attributes.container,this.settings.classes.animating)){a=250>Number(+new Date-f.vars.start.time)&&20<Math.abs(f.vars.delta.x)||Math.abs(f.vars.delta.x)>this._attributes.currentSlide.offsetWidth/2;var b=0>f.vars.delta.x?"next":"previous",c=this.settings.transitionDuration?this.settings.transitionDuration/2:0;f.vars.isScrolling||(a?(f.vars.direction=b,"next"==f.vars.direction?(g(this._attributes.currentSlide,-this._attributes.currentSlide.offsetWidth,c),g(this._attributes.nextSlide,
0,c)):(g(this._attributes.previousSlide,0,c),g(this._attributes.currentSlide,this._attributes.currentSlide.offsetWidth,c)),setTimeout(f.transitionEnd.bind(this),c)):"next"==b?(g(this._attributes.currentSlide,0,c),g(this._attributes.nextSlide,this._attributes.currentSlide.offsetWidth,c)):(g(this._attributes.previousSlide,-this._attributes.previousSlide.offsetWidth,c),g(this._attributes.currentSlide,0,c)),c&&(d(this._attributes.container,this.settings.classes.animating),setTimeout(function(){e(this._attributes.container,
this.settings.classes.animating)}.bind(this),c)))}},transitionEnd:function(a){if(f.vars.direction){m(this._attributes.previousSlide);m(this._attributes.currentSlide);m(this._attributes.nextSlide);e(this._attributes.container,this.settings.classes.touching);e(this._attributes.previousSlide,this.settings.classes.previousSlide);e(this._attributes.currentSlide,this.settings.classes.currentSlide);e(this._attributes.nextSlide,this.settings.classes.nextSlide);this._attributes.currentSlide.setAttribute("aria-hidden",
"true");a=this._attributes.slides;var b=a.indexOf(this._attributes.currentSlide);"next"==f.vars.direction?(this._attributes.previousSlide=this._attributes.currentSlide,this._attributes.currentSlide=a[b+1],this._attributes.nextSlide=a[b+2],"undefined"===typeof this._attributes.currentSlide&&"undefined"===typeof this._attributes.nextSlide?(this._attributes.currentSlide=a[0],this._attributes.nextSlide=a[1]):"undefined"===typeof this._attributes.nextSlide&&(this._attributes.nextSlide=a[0]),c(this._attributes.nextSlide)):
(this._attributes.nextSlide=this._attributes.currentSlide,this._attributes.previousSlide=a[b-2],this._attributes.currentSlide=a[b-1],"undefined"===typeof this._attributes.currentSlide&&"undefined"===typeof this._attributes.previousSlide?(this._attributes.currentSlide=a[a.length-1],this._attributes.previousSlide=a[a.length-2]):"undefined"===typeof this._attributes.previousSlide&&(this._attributes.previousSlide=a[a.length-1]),c(this._attributes.previousSlide));d(this._attributes.previousSlide,this.settings.classes.previousSlide);
d(this._attributes.currentSlide,this.settings.classes.currentSlide);d(this._attributes.nextSlide,this.settings.classes.nextSlide);this._attributes.currentSlide.setAttribute("aria-hidden","false");this.settings.afterChange.apply(this)}}},k=function(a){this.settings={selector:"",height:400,interval:4E3,transitionDuration:700,effect:"slide",disableNav:!1,keyboardNav:!0,previousNavSelector:"",nextNavSelector:"",classes:{container:"ideal-image-slider",slide:"iis-slide",previousSlide:"iis-previous-slide",
currentSlide:"iis-current-slide",nextSlide:"iis-next-slide",previousNav:"iis-previous-nav",nextNav:"iis-next-nav",animating:"iis-is-animating",touchEnabled:"iis-touch-enabled",touching:"iis-is-touching",directionPrevious:"iis-direction-previous",directionNext:"iis-direction-next"},onInit:function(){},onStart:function(){},onStop:function(){},onDestroy:function(){},beforeChange:function(){},afterChange:function(){}};"string"===typeof a?this.settings.selector=a:"object"===typeof a&&l(this.settings,a);
var b=document.querySelector(this.settings.selector);if(!b)return null;a=Array.prototype.slice.call(b.children);var e=[];b.innerHTML="";Array.prototype.forEach.call(a,function(a,f){if(a instanceof HTMLImageElement||a instanceof HTMLAnchorElement){var c=document.createElement("a"),g="",h="";if(a instanceof HTMLAnchorElement){var g=a.getAttribute("href"),h=a.getAttribute("target"),k=a.querySelector("img");if(null!==k)a=k;else return}if("undefined"!==typeof a.dataset){if(l(c.dataset,a.dataset),c.dataset.src=
a.dataset.src?a.dataset.src:a.src,(1<window.devicePixelRatio||window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),(min--moz-device-pixel-ratio: 1.5),(-o-min-device-pixel-ratio: 3/2),(min-resolution: 1.5dppx)").matches)&&a.dataset["src-2x"])c.dataset.src=a.dataset["src-2x"]}else a.getAttribute("data-src")?c.setAttribute("data-src",a.getAttribute("data-src")):c.setAttribute("data-src",a.getAttribute("src"));g&&c.setAttribute("href",g);h&&c.setAttribute("target",h);a.getAttribute("className")&&
d(c,a.getAttribute("className"));a.getAttribute("id")&&c.setAttribute("id",a.getAttribute("id"));a.getAttribute("title")&&c.setAttribute("title",a.getAttribute("title"));a.getAttribute("alt")&&(c.innerHTML=a.getAttribute("alt"));c.setAttribute("role","tabpanel");c.setAttribute("aria-hidden","true");c.style.cssText+="-webkit-transition-duration:"+this.settings.transitionDuration+"ms;-moz-transition-duration:"+this.settings.transitionDuration+"ms;-o-transition-duration:"+this.settings.transitionDuration+
"ms;transition-duration:"+this.settings.transitionDuration+"ms;";b.appendChild(c);e.push(c)}}.bind(this));if(1>=e.length)return b.innerHTML="",Array.prototype.forEach.call(a,function(a,c){b.appendChild(a)}),null;if(!this.settings.disableNav){var g,k;this.settings.previousNavSelector?g=document.querySelector(this.settings.previousNavSelector):(g=document.createElement("a"),b.appendChild(g));this.settings.nextNavSelector?k=document.querySelector(this.settings.nextNavSelector):(k=document.createElement("a"),
b.appendChild(k));d(g,this.settings.classes.previousNav);d(k,this.settings.classes.nextNav);g.addEventListener("click",function(){if(h(this._attributes.container,this.settings.classes.animating))return!1;this.stop();this.previousSlide()}.bind(this));k.addEventListener("click",function(){if(h(this._attributes.container,this.settings.classes.animating))return!1;this.stop();this.nextSlide()}.bind(this));if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)this.settings.effect=
"slide",g.style.display="none",k.style.display="none",d(b,this.settings.classes.touchEnabled),b.addEventListener("touchstart",f.start.bind(this),!1),b.addEventListener("touchmove",f.move.bind(this),!1),b.addEventListener("touchend",f.end.bind(this),!1);this.settings.keyboardNav&&document.addEventListener("keyup",function(a){a=a||window.event;a="number"==typeof a.which?a.which:a.keyCode;if(37==a){if(h(this._attributes.container,this.settings.classes.animating))return!1;this.stop();this.previousSlide()}else if(39==
a){if(h(this._attributes.container,this.settings.classes.animating))return!1;this.stop();this.nextSlide()}}.bind(this))}this._attributes={container:b,slides:e,previousSlide:"undefined"!==typeof e[e.length-1]?e[e.length-1]:e[0],currentSlide:e[0],nextSlide:"undefined"!==typeof e[1]?e[1]:e[0],timerId:0,origChildren:a};this.settings.height&&(this._attributes.container.style.height=this.settings.height+"px");d(b,this.settings.classes.container);d(b,"iis-effect-"+this.settings.effect);Array.prototype.forEach.call(this._attributes.slides,
function(a,b){d(a,this.settings.classes.slide)}.bind(this));d(this._attributes.previousSlide,this.settings.classes.previousSlide);d(this._attributes.currentSlide,this.settings.classes.currentSlide);d(this._attributes.nextSlide,this.settings.classes.nextSlide);this._attributes.currentSlide.setAttribute("aria-hidden","false");c(this._attributes.currentSlide,function(){this.settings.onInit.apply(this)}.bind(this));c(this._attributes.previousSlide);c(this._attributes.nextSlide)};k.prototype.get=function(a){if(!this._attributes)return null;
if(this._attributes.hasOwnProperty(a))return this._attributes[a]};k.prototype.set=function(a,b){return!this._attributes?null:this._attributes[a]=b};k.prototype.start=function(){this._attributes&&(this._attributes.timerId=setInterval(this.nextSlide.bind(this),this.settings.interval),this.settings.onStart.apply(this),window.onblur=function(){this.stop()}.bind(this))};k.prototype.stop=function(){this._attributes&&(clearInterval(this._attributes.timerId),this._attributes.timerId=0,this.settings.onStop.apply(this))};
k.prototype.previousSlide=function(){this.settings.beforeChange.apply(this);e(this._attributes.previousSlide,this.settings.classes.previousSlide);e(this._attributes.currentSlide,this.settings.classes.currentSlide);e(this._attributes.nextSlide,this.settings.classes.nextSlide);this._attributes.currentSlide.setAttribute("aria-hidden","true");var a=this._attributes.slides,b=a.indexOf(this._attributes.currentSlide);this._attributes.nextSlide=this._attributes.currentSlide;this._attributes.previousSlide=
a[b-2];this._attributes.currentSlide=a[b-1];"undefined"===typeof this._attributes.currentSlide&&"undefined"===typeof this._attributes.previousSlide?(this._attributes.currentSlide=a[a.length-1],this._attributes.previousSlide=a[a.length-2]):"undefined"===typeof this._attributes.previousSlide&&(this._attributes.previousSlide=a[a.length-1]);c(this._attributes.previousSlide);d(this._attributes.previousSlide,this.settings.classes.previousSlide);d(this._attributes.currentSlide,this.settings.classes.currentSlide);
d(this._attributes.nextSlide,this.settings.classes.nextSlide);this._attributes.currentSlide.setAttribute("aria-hidden","false");d(this._attributes.container,this.settings.classes.directionPrevious);setTimeout(function(){e(this._attributes.container,this.settings.classes.directionPrevious)}.bind(this),this.settings.transitionDuration);this.settings.transitionDuration&&(d(this._attributes.container,this.settings.classes.animating),setTimeout(function(){e(this._attributes.container,this.settings.classes.animating)}.bind(this),
this.settings.transitionDuration));this.settings.afterChange.apply(this)};k.prototype.nextSlide=function(){this.settings.beforeChange.apply(this);e(this._attributes.previousSlide,this.settings.classes.previousSlide);e(this._attributes.currentSlide,this.settings.classes.currentSlide);e(this._attributes.nextSlide,this.settings.classes.nextSlide);this._attributes.currentSlide.setAttribute("aria-hidden","true");var a=this._attributes.slides,b=a.indexOf(this._attributes.currentSlide);this._attributes.previousSlide=
this._attributes.currentSlide;this._attributes.currentSlide=a[b+1];this._attributes.nextSlide=a[b+2];"undefined"===typeof this._attributes.currentSlide&&"undefined"===typeof this._attributes.nextSlide?(this._attributes.currentSlide=a[0],this._attributes.nextSlide=a[1]):"undefined"===typeof this._attributes.nextSlide&&(this._attributes.nextSlide=a[0]);c(this._attributes.nextSlide);d(this._attributes.previousSlide,this.settings.classes.previousSlide);d(this._attributes.currentSlide,this.settings.classes.currentSlide);
d(this._attributes.nextSlide,this.settings.classes.nextSlide);this._attributes.currentSlide.setAttribute("aria-hidden","false");d(this._attributes.container,this.settings.classes.directionNext);setTimeout(function(){e(this._attributes.container,this.settings.classes.directionNext)}.bind(this),this.settings.transitionDuration);this.settings.transitionDuration&&(d(this._attributes.container,this.settings.classes.animating),setTimeout(function(){e(this._attributes.container,this.settings.classes.animating)}.bind(this),
this.settings.transitionDuration));this.settings.afterChange.apply(this)};k.prototype.gotoSlide=function(a){this.settings.beforeChange.apply(this);this.stop();e(this._attributes.previousSlide,this.settings.classes.previousSlide);e(this._attributes.currentSlide,this.settings.classes.currentSlide);e(this._attributes.nextSlide,this.settings.classes.nextSlide);this._attributes.currentSlide.setAttribute("aria-hidden","true");a--;var b=this._attributes.slides,f=b.indexOf(this._attributes.currentSlide);
this._attributes.previousSlide=b[a-1];this._attributes.currentSlide=b[a];this._attributes.nextSlide=b[a+1];"undefined"===typeof this._attributes.previousSlide&&(this._attributes.previousSlide=b[b.length-1]);"undefined"===typeof this._attributes.nextSlide&&(this._attributes.nextSlide=b[0]);c(this._attributes.previousSlide);c(this._attributes.currentSlide);c(this._attributes.nextSlide);d(this._attributes.previousSlide,this.settings.classes.previousSlide);d(this._attributes.currentSlide,this.settings.classes.currentSlide);
d(this._attributes.nextSlide,this.settings.classes.nextSlide);this._attributes.currentSlide.setAttribute("aria-hidden","false");a<f?(d(this._attributes.container,this.settings.classes.directionPrevious),setTimeout(function(){e(this._attributes.container,this.settings.classes.directionPrevious)}.bind(this),this.settings.transitionDuration)):(d(this._attributes.container,this.settings.classes.directionNext),setTimeout(function(){e(this._attributes.container,this.settings.classes.directionNext)}.bind(this),
this.settings.transitionDuration));this.settings.transitionDuration&&(d(this._attributes.container,this.settings.classes.animating),setTimeout(function(){e(this._attributes.container,this.settings.classes.animating)}.bind(this),this.settings.transitionDuration));this.settings.afterChange.apply(this)};k.prototype.destroy=function(){clearInterval(this._attributes.timerId);this._attributes.timerId=0;this._attributes.container.innerHTML="";Array.prototype.forEach.call(this._attributes.origChildren,function(a,
b){this._attributes.container.appendChild(a)}.bind(this));e(this._attributes.container,this.settings.classes.container);e(this._attributes.container,"iis-effect-"+this.settings.effect);this._attributes.container.style.height="";this.settings.onDestroy.apply(this)};return{_hasClass:h,_addClass:d,_removeClass:e,Slider:k}}();
(function(l){var h=function(d,e){var c=d._attributes.bulletNav.querySelectorAll("a");c&&Array.prototype.forEach.call(c,function(c,d){l._removeClass(c,"iis-bullet-active");c.setAttribute("aria-selected","false");d===e&&(l._addClass(c,"iis-bullet-active"),c.setAttribute("aria-selected","true"))}.bind(this))};l.Slider.prototype.addBulletNav=function(){l._addClass(this._attributes.container,"iis-has-bullet-nav");var d=document.createElement("div");l._addClass(d,"iis-bullet-nav");d.setAttribute("role",
"tablist");Array.prototype.forEach.call(this._attributes.slides,function(c,e){var f=document.createElement("a");f.innerHTML=e+1;f.setAttribute("role","tab");f.addEventListener("click",function(){if(l._hasClass(this._attributes.container,this.settings.classes.animating))return!1;this.stop();this.gotoSlide(e+1)}.bind(this));d.appendChild(f)}.bind(this));this._attributes.bulletNav=d;this._attributes.container.appendChild(d);h(this,0);var e=this.settings.afterChange,c=function(){var c=this._attributes.slides.indexOf(this._attributes.currentSlide);
h(this,c);return e()}.bind(this);this.settings.afterChange=c};return l})(IdealImageSlider);
(function(l){l.Slider.prototype.addCaptions=function(){l._addClass(this._attributes.container,"iis-has-captions");Array.prototype.forEach.call(this._attributes.slides,function(h,d){var e=document.createElement("div");l._addClass(e,"iis-caption");var c="";h.getAttribute("title")&&(c+='<div class="iis-caption-title">'+h.getAttribute("title")+"</div>");if(h.getAttribute("data-caption")){var g=h.getAttribute("data-caption");"#"==g.substring(0,1)||"."==g.substring(0,1)?(g=document.querySelector(g))&&(c+=
'<div class="iis-caption-content">'+g.innerHTML+"</div>"):c+='<div class="iis-caption-content">'+h.getAttribute("data-caption")+"</div>"}else h.innerHTML&&(c+='<div class="iis-caption-content">'+h.innerHTML+"</div>");h.innerHTML="";c&&(e.innerHTML=c,h.appendChild(e))}.bind(this))};return l})(IdealImageSlider);
