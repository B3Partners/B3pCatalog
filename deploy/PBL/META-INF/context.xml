<?xml version="1.0" encoding="UTF-8"?>
<Context antiJARLocking="true" path="/b3pcatalog">

    <!-- Locatie van XML configuratiebestand. Een relatief pad is ten opzichte
         van CATALINA_BASE. Standaardwaarde in web.xml: conf/b3pcatalog/config.xml
    -->
    <Parameter name="config" value="conf/b3pcatalog/config.xml" override="false"/>


   <!-- werkend met serviceaccount, zonder rollen (altijd rol "test")
   <Realm className="org.apache.catalina.realm.JNDIRealm"
        debug="99"
        allRolesMode="strictAuthOnly"
        connectionURL="ldap://10.201.128.1:389"
        connectionName="CN=Serviceaccount ArcGIS,OU=Serviceaccounts,OU=Users,OU=OO,DC=PBL,DC=LOCAL"
        connectionPassword="[D1tW0rdt33NL@$t19W@chtw00rd!!]"
        derefAliases="never"
        userBase="OU=Users,OU=Accounts,OU=Org,DC=PBL,DC=LOCAL"
        userSubtree="true"
        userSearch="cn={0}"
        commonRole="test"
    /-->

   <!-- role search werkt niet zonder service account, roleSearchAsUser=false (default) wordt
        niet door server toegestaan roleSearchAsUser=true werkt niet want password wordt niet
        opgeslagen in user.getPassword()
   <Realm className="org.apache.catalina.realm.JNDIRealm"
        debug="99"
        allRolesMode="strictAuthOnly"
        connectionURL="ldap://10.201.128.1:389"
        derefAliases="never"
        userPattern="CN={0},OU=EIG,OU=Users,OU=Accounts,OU=Org,DC=PBL,DC=LOCAL"
        roleBase="OU=Applications,OU=Security,OU=OO,DC=PBL,DC=LOCAL"
        roleName="cn"
        roleSearch="(member={0})"
        roleSearchAsUser="true"
    /-->

   <!-- werkend met serviceaccount en zoeken naar rollen, rolnamen zijn entries onder Applications:
         G-PBL-OO-B3PCatalog, etc. -->
   <Realm className="org.apache.catalina.realm.JNDIRealm"
        debug="99"
        connectionURL="ldap://10.201.128.1:389"
        connectionName="CN=Serviceaccount ArcGIS,OU=Serviceaccounts,OU=Users,OU=OO,DC=PBL,DC=LOCAL"
        connectionPassword="[D1tW0rdt33NL@$t19W@chtw00rd!!]"
        derefAliases="never"
        userBase="OU=Users,OU=Accounts,OU=Org,DC=PBL,DC=LOCAL"
        userSubtree="true"
        userSearch="cn={0}"
        roleBase="OU=Applications,OU=Security,OU=OO,DC=PBL,DC=LOCAL"
        roleName="cn"
        roleSearch="(member={0})"
        referrals="follow"
        commonRole="gebruiker"
    />
</Context>
